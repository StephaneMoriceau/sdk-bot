box:
  id: openjdk
  ports:
    - $PORT

#Build our application 
build:
  steps:
    - script:
        code: |
          ls -al
          cd bots-client-sdk-js-18.2.3.0
          ls -al
          ./configure http://132.145.86.151/sdk-bot
          ls -al
    - internal/docker-build:
        context: bots-client-sdk-js-18.2.3.0
        dockerfile: Dockerfile
        image-name: sdkbot
    - script:
        code: ls -al
        
#Push the docker image with our built and tested application to the Oracle Container Registry
push-release:
  steps:
    - internal/docker-push:
        username: $DOCKER_USERNAME
        password: $DOCKER_PASSWORD
        repository: $DOCKER_REPO
        registry: $DOCKER_REGISTRY        
        
deploy-service:
  steps:
     - kubectl:
        name: apply service    
        server: $KUBERNETES_MASTER
        token: $KUBERNETES_TOKEN
        insecure-skip-tls-verify: true
        command: apply -f service.yml
